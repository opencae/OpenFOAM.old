%#! uplatex UserGuideJa
\chapter{モデルと物性値}
\label{chap:7}
OpenFOAMには，各々が特定の問題に特化して設計されたソルバが，
幅広い範囲にわたって用意されています．
ユーザは，特定のケースに対してモデリングを行う際に
最初にソルバの選択ができるように，
その方程式とアルゴリズムは一つ一つが異なったものとなっています．
ソルバの選択には，通常，\autoref{sec:3.5}にある各ソルバの説明に目を通して，
そのケースに対して適切なソルバを見つけてください．
各々のケースを定義するためには，
最終的にはパラメータと物理的特性が必要となりますが，
いくつかのモデリングのオプションはケースの
\index{constant@\OFpath{constant}!ディレクトリ}%
\index{ディレクトリ!constant@\OFpath{constant}}%
\OFpath{constant}ディレクトリの中のディクショナリに
登録されている中から実行時に指定することができます．
本章では，一般的なモデルと，実行時に指定される
関連したプロパティについて詳しく説明します．



\section{熱物理モデル}
\label{sec:7.1}
熱物性モデルは，エネルギ，熱および物理的な特性が関与しています．

\index{thermophysicalProperties@\OFdictionary{thermophysicalProperties}!ディクショナリ}%
\index{ディクショナリ!thermophysicalProperties@\OFdictionary{thermophysicalProperties}}%
\OFdictionary{thermophysicalProperties}ディレクトリは，
\index{thermophysical@\OFemph{thermophysical}!ライブラリ}%
\index{ライブラリ!thermophysical@\OFemph{thermophysical}}%
\OFemph{thermophysical}モデルのライブラリを使用する
すべてのソルバにより読み込まれます．
熱物性モデルは，OpenFOAMの中では，
その他のプロパティについても計算される
圧力温度 ($p$--$T$) システムとして構築されます．
これは，シミュレーションの中で使用される完全な熱物性モデルを指定する
\index{thermoType@\OFkeyword{thermoType}!キーワード}%
\index{キーワード!thermoType@\OFkeyword{thermoType}}%
\OFkeyword{thermoType}と呼ばれる必須のディクショナリ登録です．
熱物性のモデリングは，状態の基礎方程式を定義している
レイヤからスタートし，
前のレイヤからプロパティを読込んだモデリングのレイヤを追加します．
\OFkeyword{thermoType}の名称は，
\autoref{tbl:7.1}にリストアップしている
モデリングのマルチレイヤを意味しています．


\vskip\floatsep
\begingroup
 \small
% \begin{table}[ht]
 \LTXtable{\textwidth}{tbl/tbl-7-1}
 \addtocounter{table}{-1}%
 \tblcaption{熱物性モデリングの階層}
 \label{tbl:7.1}
% \end{table}
\endgroup
\vskip\floatsep


以下は\OFkeyword{thermoType}のエントリの一例です．
\begin{OFverbatim}[file]
thermoType
{
    type            hePsiThermo;
    mixture         pureMixture;
    transport       const;
    thermo          hConst;
    equationOfState perfectGas;
    specie          specie;
    energy          sensibleEnthalpy;
}
\end{OFverbatim}
このキーワード・エントリは，
例えば輸送 (\OFkeyword{transport}) を定数（粘性と熱拡散を定数）として，
理想気体の状態方程式 (%
\index{equationOfState@\OFkeyword{equationOfState}!キーワード}%
\index{キーワード!equationOfState@\OFkeyword{equationOfState}}%
\OFkeyword{equationOfState}) を使うといった，
熱物理モデルの選択を示しています．
それに加えて
\index{energy@\OFkeyword{energy}!キーワード}%
\index{キーワード!energy@\OFkeyword{energy}}%
\OFkeyword{energy}というキーワード・エントリがあり，
解析におけるエネルギの扱い方を指定することができます．
エネルギとしては，内部エネルギかエンタルピ，
そして生成熱$\Delta h_{\mathrm{f}}$を含めるかどうかを選択できます．
生成熱を含める場合は\emph{絶対}エネルギを使いますが，
そうでない場合は\emph{顕在}エネルギを使います．
例えば，絶対エネルギ$h$と顕在エネルギ$h_{\mathrm{s}}$の関係は以下のようになります．
\begin{align}
 \label{eq:7.1@2.2.0}
 h = h_{\mathrm{s}} + \sum_{i}c_{i}\Delta h_{\mathrm{f}}^{i}
\end{align}
ここで$c_{i}$と$h_{\mathrm{f}}^{i}$は，それぞれ化学種$i$のモル比と生成熱です．
ほとんどのケースにおいて，反応によるエネルギ変化を扱いやすいように，顕在エネルギを使います．
\index{energy@\OFkeyword{energy}!キーワード}%
\index{キーワード!energy@\OFkeyword{energy}}%
\OFkeyword{energy}に対するキーワード・エントリは，
例えば\OFkeyword{sensibleEnthalpy}，\OFkeyword{sensibleInternalEnergy}，
そして\OFkeyword{absoluteEnthalpy}などがあります．


\subsection{熱物性データ}
\label{ssec:7.1.1}
基本的な熱物性値は，各種類ごとに入力データに指定します．
データエントリには，\OFkeyword{O2}，\OFkeyword{H2O}，
\OFkeyword{mixture}といった物質名を示すキーワードに続けて，
以下のような係数のサブディクショナリを入力する必要があります．
\begin{description}
 \item[\OFkeyword{specie}]
\index{specie@\OFkeyword{specie}!キーワード}%
\index{キーワード!specie@\OFkeyword{specie}}%
            その物質のモル数
\index{nMoles@\OFkeyword{nMoles}!キーワード}%
\index{キーワード!nMoles@\OFkeyword{nMoles}}%
            \OFkeyword{nMoles}，
            およびモル質量%
\footnote{訳注：原文ではmolecular weightとなっているので直訳すれば「モル重量」だが，
            単位が$\unit*{g/mol}$とされているので「モル質量」とした．}%
\index{molWeight@\OFkeyword{molweight}!キーワード}%
\index{キーワード!molWeight@\OFkeyword{molweight}}%
            \OFkeyword{molWeight}を$\unit*{g/mol}$の単位で入力します．
\index{thermodynamics@\OFkeyword{thermodynamics}!キーワード}%
\index{キーワード!thermodynamics@\OFkeyword{thermodynamics}}%
 \item[\OFkeyword{thermodynamics}] 選択した熱物理モデル（後述）に対する係数を入力します．
\index{transport@\OFkeyword{transport}!キーワード}%
\index{キーワード!transport@\OFkeyword{transport}}%
 \item[\OFkeyword{transport}] 選択した輸送モデル（後述）に対する係数を入力します．
\end{description}


熱力学係数は見かけ上，比熱$c_{\mathrm{p}}$の評価に関与し，
そこから他の物性値が導出されます．
現在の\OFkeyword{thermo}モデルは，以下に示すとおりです．
\begin{description}
 \item[hConstThermo]
            $c_{\mathrm{p}}$と融解熱$H_{\mathrm{f}}$を定数と仮定します．
            単純に
\index{Cp@\OFkeyword{Cp}!キーワード}%
\index{キーワード!Cp@\OFkeyword{Cp}}%
            \OFkeyword{Cp}および
\index{Hf@\OFkeyword{Hf}!キーワード}%
\index{キーワード!Hf@\OFkeyword{Hf}}%
            \OFkeyword{Hf}というキーワードで
            二つの値$c_{\mathrm{p}}$と$H_{\mathrm{f}}$を指定します．
 \item[eConstThermo]
            $c_{\mathrm{v}}$と融解熱$H_{\mathrm{f}}$を定数と仮定します．
            単純に
\index{Cv@\OFkeyword{Cv}!キーワード}%
\index{キーワード!Cv@\OFkeyword{Cv}}%
            \OFkeyword{Cv}および
\index{Hf@\OFkeyword{Hf}!キーワード}%
\index{キーワード!Hf@\OFkeyword{Hf}}%
            \OFkeyword{Hf}というキーワードで
            二つの値$c_{\mathrm{v}}$と$H_{\mathrm{f}}$を指定します．
 \item[janafThermo]
            熱力学の\OFemph{JANAF}表から得られた一連の係数により，
            $c_{\mathrm{p}}$を温度の関数として計算します．
            順に並べた係数のリストを\autoref{tbl:7.3}に示します．
            関数は，温度の下限$T_{\mathrm{l}}$と上限$T_{\mathrm{h}}$の間で妥当性が確認されています．
            係数は二組示されています．
            最初の組は常温$T_{\mathrm{c}}$以上 (そして$T_{\mathrm{h}}$以下) の温度についてのものであり，
            二組目は$T_{\mathrm{c}}$より以下 (そして$T_{\mathrm{l}}$以上) の範囲のものです．
            $c_{\mathrm{p}}$を温度の関数として表すと，
\begin{align}
 \label{eq:7.1}
 c_{\mathrm{p}} = R((((a_{4}T + a_{3})T + a_{2})T + a_{1})T + a_{0})
\end{align}
            これに加えて，高温と低温の両方に$a_{5}$，$a_{6}$という積分定数があります．
            これらは，それぞれ$h$と$s$を評価するために使われます．
 \item[hPolynomialThermo]
            $c_{\mathrm{p}}$を温度の関数として，任意次数の多項式によって計算します．
            次のケースにその使用例があります：\\
            \hfil\OFpath{\$FOAM\_TUTORIALS/lagrangian/porousExplicitSourceReactingParcelFoam/filter}
\end{description}


\begin{table}[ht]
 \input{tbl/tbl-7-3}
 \caption{JANAFの熱力学係数}
 \label{tbl:7.3}
\end{table}


輸送係数は，粘性係数%
\footnote{訳注：原文にはdynamic viscosityとあるが，文脈からして動粘性係数ではない．}%
$\mu$，熱伝導率$\kappa$，層流熱伝導率（エンタルピ方程式のため）$\alpha$を
評価するために使われます．
現在の\OFclass{transport}モデルは，以下に説明するとおりです．
\begin{description}
 \item[\OFclass{constTransport}]
            $\mu$とPrandtl数$\nPr = c_{\mathrm{p}}\mu/\kappa$が一定であると仮定します．
            それぞれキーワード
\index{mu@\OFkeyword{mu}!キーワード}%
\index{キーワード!mu@\OFkeyword{mu}}%
            \OFkeyword{mu}および
\index{Pr@\OFkeyword{Pr}!キーワード}%
\index{キーワード!Pr@\OFkeyword{Pr}}%
            \OFkeyword{Pr}によって指定します．
 \item[\OFclass{sutherlandTransport}]
            $\mu$を温度$T$の関数として計算します．
            これには，Sutherland係数$A_{\mathrm{S}}$とSutherland温度$T_{\mathrm{S}}$が用いられ，
            キーワード
\index{As@\OFkeyword{As}!キーワード}%
\index{キーワード!As@\OFkeyword{As}}%
            \OFkeyword{As}および
\index{Ts@\OFkeyword{Ts}!キーワード}%
\index{キーワード!Ts@\OFkeyword{Ts}}%
            \OFkeyword{Ts}によって指定します．
            $\mu$は，次のように計算されます．
\begin{align}
 \label{eq:7.2}
 \mu = \frac{A_{\mathrm{S}}\sqrt{T}}{1 + T_{\mathrm{S}}/T}
\end{align}
 \item[polynomialTransport]
            $\mu$と$\kappa$を温度$T$の関数として，任意次数の多項式から計算します．
\end{description}
次は，\OFkeyword{fuel}という名前の種についてのエントリの例です．
これは，\OFclass{sutherlandTransport}と\OFclass{janaf\-Thermo}を使ってモデル化されています．
\index{Tlow@\OFkeyword{Tlow}!キーワード}%
\index{キーワード!Tlow@\OFkeyword{Tlow}}%
\index{Thigh@\OFkeyword{Thigh}!キーワード}%
\index{キーワード!Thigh@\OFkeyword{Thigh}}%
\index{Tcommon@\OFkeyword{Tcommon}!キーワード}%
\index{キーワード!Tcommon@\OFkeyword{Tcommon}}%
\index{highCpCoeffs@\OFkeyword{highCpCoeffs}!キーワード}%
\index{キーワード!highCpCoeffs@\OFkeyword{highCpCoeffs}}%
\index{lowCpCoeffs@\OFkeyword{lowCpCoeffs}!キーワード}%
\index{キーワード!lowCpCoeffs@\OFkeyword{lowCpCoeffs}}%
\begin{OFverbatim}[file]
fuel
{
    specie
    {
        nMoles       1;
        molWeight    16.0428;
    }
    thermodynamics
    {
        Tlow         200;
        Thigh        6000;
        Tcommon      1000;
        highCpCoeffs (1.63543 0.0100844 -3.36924e-06 5.34973e-10
                      -3.15528e-14 -10005.6 9.9937);
        lowCpCoeffs  (5.14988 -0.013671 4.91801e-05 -4.84744e-08
                      1.66694e-11 -10246.6 -4.64132);
    }
    transport
    {
        As           1.67212e-06;
        Ts           170.672;
    }
}
\end{OFverbatim}
次に示すのは，\OFkeyword{air}という名前の物質についての，エントリの例です．
これは，\OFclass{constTransport}と\OFclass{hConstThermo}でモデル化されています．
\begin{OFverbatim}[file]
air
{
    specie
    {
        nMoles          1;
        molWeight       28.96;
    }
    thermodynamics
    {
        Cp              1004.5;
        Hf              2.544e+06;
    }
    transport
    {
        mu              1.8e-05;
        Pr              0.7;
    }
}
\end{OFverbatim}



\section{乱流モデル}
\label{sec:7.2}
乱流のモデリングを含むあらゆるソルバは
\index{turbulenceProperties@\OFdictionary{turbulenceProperties}!ディクショナリ}%
\index{ディクショナリ!turbulenceProperties@\OFdictionary{turbulenceProperties}}%
\OFdictionary{turbulenceProperties}ディクショナリを読み込みます．
このファイルの中では，
\index{simulationType@\OFkeyword{simulationType}!キーワード}%
\index{キーワード!simulationType@\OFkeyword{simulationType}}%
\OFkeyword{simulationType}キーワードで
使用する乱流モデルとして次のいずれかを選択します．
\begin{description}
 \item[laminar]
\index{laminar@\OFkeyword{laminar}!キーワードエントリ}%
\index{キーワードエントリ!laminar@\OFkeyword{laminar}}%
            乱流モデルを使用しない
 \item[RASModel]
\index{RASModel@\OFkeyword{RASModel}!キーワードエントリ}%
\index{キーワードエントリ!RASModel@\OFkeyword{RASModel}}%
            Reynolds平均応力 (RAS) モデル
 \item[LESModel]
\index{LESModel@\OFkeyword{LESModel}!キーワードエントリ}%
\index{キーワードエントリ!LESModel@\OFkeyword{LESModel}}%
            ラージ・エディ・シミュレーション (LES) モデル
\end{description}

\OFkeyword{RASModel}が選択されているとき，
RASモデリングの選択は，同じく\OFpath{constant}ディレクトリにある
\OFdictionary{RASProperties}ファイルで設定します．
RAS乱流モデルは，\autoref{tbl:3.9}に示した利用可能なモデルの長いリストから，
\OFkeyword{RASModel}エントリで選択します．
同様に，\OFkeyword{LESModel}が選択された場合，
LESモデリングの詳細は\OFdictionary{LESProperties}ディクショナリで記述し，
LES乱流モデルは\OFkeyword{LESModel}エントリで選択します．
\OFdictionary{RASProperties}に必要なエントリは，
\autoref{tbl:7.4}に，
また\OFdictionary{LESProperties}ディクショナリについては
\autoref{tbl:7.5}に示します．


\begin{table}[ht]
 \input{tbl/tbl-7-4}
 \caption{\OFdictionary{RASProperties}ディクショナリにおけるキーワードエントリ}
 \label{tbl:7.4}
\end{table}


\begin{table}[ht]
 \input{tbl/tbl-7-5}
 \caption{\OFdictionary{LESProperties}ディクショナリにおけるキーワードエントリ}
 \label{tbl:7.5}
\end{table}


非圧縮性および圧縮性のRAS乱流モデル，等容変化および非等容変化LESモデル，
そしてデルタモデルは，\autoref{tbl:3.9}に示しています．
これらの使用例は\OFpath{\$FOAM\_TUTORIALS}以下に見つかります．


\subsection{モデル係数}
\label{ssec:7.2.1}
RASモデルの係数には，それぞれのソースコードの中でデフォルト値が与えられています．
もしこのデフォルト値を上書きしたければ，
モデル名に\OFkeyword{Coeffs}を加えたキーワード名
（たとえば\OFkeyword{kEpsilon}モデルなら\OFkeyword{kEpsilonCoeffs}）
のサブディクショナリを，
\OFdictionary{RASProperties}ファイルに追加することで実現できます．
もし\OFdictionary{RASProperties}ファイルで\OFkeyword{printCoeffs}スイッチが
\OFkeyword{on}になっていれば，
計算開始時にモデルが作成されたときに，
該当する\OFkeyword{\ldots Coeffs}ディクショナリの例が標準出力に表示されます．
ユーザは，これを\OFdictionary{RASProperties}にコピーして，
必要に応じて数値を変更すればよいでしょう．


\subsection{壁関数}
\label{ssec:7.2.2}
OpenFOAMでは，個別のパッチの境界条件として適用する，
様々な壁関数が利用可能になっています．
これにより，異なる壁領域に異なる壁関数モデルを適用することが可能になります．
壁関数モデルの選択は，
非圧縮性RASにおいては\OFpath{0/nut}ファイルの$\nu_{\mathrm{t}}$，
圧縮性RASにおいては\OFpath{0/mut}ファイルの$\mu_{\mathrm{t}}$，
非圧縮性LESにおいては\OFpath{0/nuSgs}ファイルの$\nu_{\mathrm{sgs}}$，
圧縮性LESにおいては\OFpath{0/muSgs}ファイルの$\mu_{\mathrm{sgs}}$
によって指定します．
たとえば，ある\OFpath{0/nut}ファイルは，
\begin{OFverbatim}[file, linenum=17]

dimensions      [0 2 -1 0 0 0 0];

internalField   uniform 0;

boundaryField
{
    movingWall
    {
        type            nutkWallFunction;
        value           uniform 0;
    }
    fixedWalls
    {
        type            nutkWallFunction;
        value           uniform 0;
    }
    frontAndBack
    {
        type            empty;
    }
}


// ************************************************************************* //
\end{OFverbatim}
本リリースでは様々な壁関数モデルが利用できます．
たとえば，\OFkeyword{nutWallFunction}，\break
\OFkeyword{nutRoughWallFunction}，
\OFkeyword{nutSpalartAllmarasStandardRoughWallFunction}，\break
\OFkeyword{nutSpalartAllmarasStandardWallFunction}，
そして\OFkeyword{nutSpalartAllmarasWallFunction}．
ユーザは，当該ディレクトリから，すべての壁関数モデルのリストを参照できます．
\begin{OFverbatim}[terminal]
find $FOAM_SRC/turbulenceModels -name wallFunctions
\end{OFverbatim}%$

それぞれの壁関数境界条件では，
\OFkeyword{E}，\OFkeyword{kappa}，そして\OFkeyword{Cmu}という
オプションのキーワードエントリで$E$，$\kappa$，そして$C_{\mu}$のデフォルト値を上書きできます．
\OFpath{nut}や\OFpath{mut}ファイルのいずれかのパッチで壁関数を選択したならば，
\OFpath{epsilon}フィールドの対応するパッチでは\OFkeyword{epsilonWallFunction}を，
乱流場\OFpath{k}，\OFpath{q}，\OFpath{R}の対応するパッチには
\OFkeyword{kqRwallFunction}を選択する必要があります．

